<script src="secure.js"></script>
<script>
const params = new URLSearchParams(location.search);
const k = params.get("k");

if (!k) {
  alert("未授權");
  location.href = "index.html";
}

let pwd;
try {
  pwd = atob(k);
} catch {
  location.href = "index.html";
}

const items = getSecureContent(pwd);

if (!items.length) {
  alert("密碼錯誤");
  location.href = "index.html";
}

const g = document.getElementById("gallery");
items.forEach(item => {
  const d = document.createElement("div");
  d.className = "item";
  d.innerHTML = `
    <img src="${item.img}">
    <p>${item.name}</p>
    <a href="${item.link}" target="_blank">下載</a>
  `;
  g.appendChild(d);
});
</script>
